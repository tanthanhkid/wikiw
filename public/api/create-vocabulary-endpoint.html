<!DOCTYPE html>
<html>
<head>
    <title>Create Vocabulary Endpoint</title>
    <script>
        // This endpoint will handle vocabulary creation
        // It's a simple HTML file that can process requests
        
        function handleRequest() {
            // Get data from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const title = urlParams.get('title');
            const content = urlParams.get('content');
            const tags = urlParams.get('tags');
            const categories = urlParams.get('categories');
            
            if (!title || !content) {
                document.body.innerHTML = `
                    <h1>Error</h1>
                    <p>Title and content are required</p>
                    <script>
                        if (window.parent !== window) {
                            window.parent.postMessage({
                                success: false,
                                error: 'Title and content are required'
                            }, '*');
                        }
                    </script>
                `;
                return;
            }
            
            // Generate slug
            const slug = generateSlug(title);
            
            // Create response
            const response = {
                success: true,
                data: {
                    title: title,
                    slug: slug,
                    filePath: `content/TU-KHAINIEM/${slug}/_index.md`,
                    url: `/tu-khainiem/${slug}/`
                }
            };
            
            // Display response
            document.body.innerHTML = `
                <h1>Vocabulary Created</h1>
                <pre>${JSON.stringify(response, null, 2)}</pre>
                <script>
                    // Send response to parent window if this is in an iframe
                    if (window.parent !== window) {
                        window.parent.postMessage(response, '*');
                    }
                </script>
            `;
        }
        
        function generateSlug(title) {
            return title
                .toLowerCase()
                .normalize('NFD')
                .replace(/[\u0300-\u036f]/g, '') // Remove diacritics
                .replace(/[^a-z0-9\s-]/g, '') // Remove special characters
                .replace(/\s+/g, '-') // Replace spaces with hyphens
                .replace(/-+/g, '-') // Replace multiple hyphens with single
                .trim('-'); // Remove leading/trailing hyphens
        }
        
        // Handle request when page loads
        window.onload = handleRequest;
    </script>
</head>
<body>
    <h1>Create Vocabulary Endpoint</h1>
    <p>Processing request...</p>
</body>
</html>
